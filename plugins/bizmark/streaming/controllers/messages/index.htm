<script>
    $(() => setInterval(updateMessages, <?= $this->getMessagesInterval(); ?>000))

    function updateMessages() {
        $.request('onRefresh')
    }
</script>
<?php $stream_link = $this->getStreamUrl(); ?>
<div class="row m-r-0">
    <div class="col-md-8">
        <?= $this->listRender() ?>
    </div>
    <?php if ($stream_link) : ?>
    <div class="col-md-4">
        <div class="embed-responsive embed-responsive-4by3">
            <iframe src="<?= $stream_link; ?>" class="embed-responsive-item" style="border:none" allow="autoplay; fullscreen" allowfullscreen=""></iframe>
        </div>
    </div>
    <?php endif; ?>
</div>

<style>
    .embed-responsive {
        position: relative;
        display: block;
        height: 0;
        padding: 0;
        overflow: hidden;
    }
    .embed-responsive-4by3 {
        padding-bottom: 75%;
    }
    .embed-responsive .embed-responsive-item, .embed-responsive embed, .embed-responsive iframe, .embed-responsive object, .embed-responsive video {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: 0;
    }
</style>