{% set person_id = ChatWindow.getPerson() %}
{% for message in messages %}
    {% set show = true %}
    {% if message.person is not empty %}
        {% if message.person.is_blocked %}
            {% set show = false %}
        {% endif %}
    {% endif %}
    {% if show %}
    <div class="{{ message.person_id is empty ? 'moderator-message' : message.person_id == person_id ? 'internal-message' : 'external-message' }} text-message">
        <div class="message-wrap">
            {% if message.content is not empty %}
            <div class="message">{{ message.content|raw }}</div>
            {% endif %}
            {% if message.is_image %}
                <div class="image-wrap preview">
                    <picture>
                        <svg width="320" height="212" viewBox="0 0 320 212" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="1" y="1" width="318" height="210" rx="9" stroke="#CCCCCC" stroke-width="2"/>
                            <path d="M117.115 197.001C117.404 188.202 118.866 179.62 121.813 171.303C124.085 164.887 127.268 159.019 132.198 154.225C136.095 150.437 140.74 148.016 146.09 146.996C146.63 146.895 147.276 146.962 147.797 147.164C156.065 150.341 164.318 150.356 172.6 147.208C173.154 146.996 173.854 146.953 174.442 147.068C181.928 148.555 187.639 152.738 192.024 158.822C197.286 166.114 200.055 174.441 201.56 183.182C202.346 187.745 202.607 192.395 203.108 197.006C174.442 197.001 145.781 197.001 117.115 197.001ZM146.62 167.9C146.625 164.661 144.011 162.028 140.793 162.037C137.605 162.047 134.947 164.742 134.971 167.934C135 171.077 137.595 173.661 140.75 173.7C143.987 173.734 146.611 171.139 146.62 167.9Z" fill="#E6E6E6"/>
                            <path d="M107 197.001C107.294 192.231 107.338 187.427 107.941 182.691C109.026 174.196 111.553 166.109 115.967 158.697C121.707 149.056 129.892 142.433 140.359 138.987C141.044 140.671 141.7 142.269 142.371 143.92C141.02 144.464 139.433 145.008 137.923 145.716C130.828 149.066 125.908 154.635 122.218 161.368C117.621 169.763 115.306 178.869 114.148 188.303C113.796 191.196 113.541 194.099 113.242 196.996C111.168 197.001 109.084 197.001 107 197.001Z" fill="#E6E6E6"/>
                            <path d="M206.972 197.001C206.422 190.296 205.708 183.615 204.015 177.079C201.951 169.118 198.999 161.57 193.818 155.044C189.848 150.038 184.948 146.327 178.822 144.315C178.542 144.223 178.272 144.103 177.997 143.988C177.963 143.973 177.954 143.906 177.992 143.988C178.701 142.467 179.381 141.023 180.226 139.218C182.951 140.652 185.927 141.971 188.643 143.699C198.883 150.226 205.322 159.703 209.34 170.951C212.225 179.033 213.551 187.398 213.614 195.971C213.619 196.312 213.551 196.649 213.517 196.991C211.337 197.001 209.152 197.001 206.972 197.001Z" fill="#E6E6E6"/>
                            <path d="M161.033 82.094C153.619 81.9929 147.069 83.0133 141.025 86.3007C135.656 89.2176 131.971 93.5591 130.076 99.3976C129.313 101.742 128.537 104.091 127.572 106.358C127.003 107.691 126.241 109.178 124.471 109.193C122.821 109.207 121.991 107.903 121.268 106.646C119.396 103.412 118.764 99.826 118.277 96.1775C117.428 89.7855 119.56 83.8893 121.085 77.8583C122.561 72.0246 123.737 66.1188 124.963 60.2225C125.213 59.0288 125.088 57.7581 125.146 56.5259C125.242 54.4129 126.217 53.6476 128.368 54.0038C131.884 54.591 135.41 55.1253 138.917 55.7847C141.531 56.2805 143.808 55.674 145.921 54.1434C149.534 51.5346 153.161 48.9403 156.783 46.3459C159.291 44.5554 160.878 44.5506 163.42 46.3363C167.149 48.9547 170.882 51.5683 174.601 54.2011C176.728 55.7077 179.02 56.2708 181.624 55.7799C185.126 55.1157 188.652 54.5814 192.173 53.999C194.141 53.6717 195.309 54.3504 195.313 56.112C195.323 64.3956 197.889 72.169 200.002 80.0339C201.131 84.231 202.505 88.3753 202.399 92.8035C202.293 97.1835 201.738 101.487 199.828 105.491C199.327 106.545 198.642 107.561 197.836 108.403C196.659 109.635 195.092 109.563 194.141 108.158C193.186 106.747 192.434 105.169 191.773 103.59C190.524 100.591 189.718 97.3664 188.16 94.5459C185.03 88.8806 179.835 85.6943 173.757 83.8364C169.406 82.5079 164.954 81.9111 161.033 82.094Z" fill="#E6E6E6"/>
                            <path d="M155.983 85.7329C155.983 98.8057 155.983 111.782 155.983 124.942C154.883 124.768 153.88 124.581 152.871 124.456C152.24 124.374 151.584 124.282 150.957 124.364C148.926 124.629 148.173 126.121 149.191 127.902C150.339 129.904 152.215 131.083 154.347 131.637C155.843 132.027 156.137 132.734 156.074 134.101C155.973 136.46 156.045 138.833 156.045 141.673C152.809 140.816 149.722 140.205 146.789 139.16C144.435 138.323 142.241 137.009 140.041 135.786C139.578 135.526 139.144 134.737 139.139 134.193C139.091 120.355 139.096 106.517 139.129 92.6736C139.129 92.1731 139.409 91.5088 139.79 91.1912C143.442 88.1251 150.995 85.5885 155.983 85.7329ZM148.217 103.932C146.668 103.898 145.366 105.126 145.303 106.685C145.236 108.322 146.48 109.669 148.101 109.708C149.63 109.746 150.971 108.49 151.039 106.955C151.111 105.361 149.809 103.97 148.217 103.932Z" fill="#E6E6E6"/>
                            <path d="M164.265 85.5836C168.813 85.8002 173.063 86.7869 177.042 88.7844C177.423 88.977 177.64 89.8433 177.64 90.4017C177.679 98.9597 177.664 107.513 177.664 116.071C177.664 122.699 177.64 129.326 177.688 135.954C177.698 137.004 177.36 137.514 176.405 137.952C172.561 139.728 168.572 140.922 164.255 141.379C164.255 138.318 164.255 135.367 164.255 132.551C165.871 131.892 167.491 131.396 168.939 130.578C169.884 130.044 170.767 129.172 171.336 128.243C172.469 126.39 171.476 124.566 169.305 124.47C168.041 124.412 166.758 124.73 165.485 124.884C165.099 124.932 164.718 124.99 164.265 125.052C164.265 111.893 164.265 98.8104 164.265 85.5836ZM170.414 103.941C168.794 103.975 167.54 105.308 167.598 106.94C167.655 108.485 168.972 109.741 170.511 109.712C172.108 109.684 173.415 108.297 173.342 106.699C173.28 105.159 171.953 103.912 170.414 103.941Z" fill="#E6E6E6"/>
                            <path d="M185.893 131.454C185.893 119.844 185.893 108.605 185.893 97.3617C186.019 97.3232 186.149 97.2798 186.274 97.2413C186.935 99.1041 187.543 100.986 188.266 102.82C189.144 105.058 189.955 107.349 191.098 109.453C192.236 111.551 194.132 112.807 196.775 112.711C195 120.008 191.44 126.111 185.893 131.454Z" fill="#E6E6E6"/>
                            <path d="M130.809 107.45C130.809 114.299 130.809 120.74 130.809 127.218C128.214 125.173 123.945 116.571 123.656 112.774C127.263 112.408 128.103 111.806 130.809 107.45Z" fill="#E6E6E6"/>
                            <path d="M36.2403 24.004V31H35.0163V24.004L28.7283 14.02H29.8083C29.9203 14.02 30.0123 14.048 30.0843 14.104C30.1563 14.152 30.2163 14.224 30.2643 14.32L35.1243 22.12C35.2283 22.304 35.3203 22.484 35.4003 22.66C35.4883 22.828 35.5643 22.996 35.6283 23.164C35.6923 22.996 35.7643 22.828 35.8443 22.66C35.9323 22.484 36.0283 22.304 36.1323 22.12L40.9923 14.32C41.0323 14.232 41.0883 14.16 41.1603 14.104C41.2403 14.048 41.3363 14.02 41.4483 14.02H42.5283L36.2403 24.004ZM46.9265 18.868C47.7825 18.868 48.5465 19.016 49.2185 19.312C49.8985 19.6 50.4705 20.012 50.9345 20.548C51.3985 21.084 51.7505 21.732 51.9905 22.492C52.2385 23.244 52.3625 24.088 52.3625 25.024C52.3625 25.96 52.2385 26.804 51.9905 27.556C51.7505 28.308 51.3985 28.952 50.9345 29.488C50.4705 30.024 49.8985 30.436 49.2185 30.724C48.5465 31.012 47.7825 31.156 46.9265 31.156C46.0705 31.156 45.3025 31.012 44.6225 30.724C43.9505 30.436 43.3785 30.024 42.9065 29.488C42.4425 28.952 42.0865 28.308 41.8385 27.556C41.5985 26.804 41.4785 25.96 41.4785 25.024C41.4785 24.088 41.5985 23.244 41.8385 22.492C42.0865 21.732 42.4425 21.084 42.9065 20.548C43.3785 20.012 43.9505 19.6 44.6225 19.312C45.3025 19.016 46.0705 18.868 46.9265 18.868ZM46.9265 30.256C47.6385 30.256 48.2585 30.136 48.7865 29.896C49.3225 29.648 49.7665 29.296 50.1185 28.84C50.4785 28.384 50.7465 27.836 50.9225 27.196C51.0985 26.548 51.1865 25.824 51.1865 25.024C51.1865 24.232 51.0985 23.512 50.9225 22.864C50.7465 22.216 50.4785 21.664 50.1185 21.208C49.7665 20.744 49.3225 20.388 48.7865 20.14C48.2585 19.892 47.6385 19.768 46.9265 19.768C46.2145 19.768 45.5905 19.892 45.0545 20.14C44.5265 20.388 44.0825 20.744 43.7225 21.208C43.3705 21.664 43.1025 22.216 42.9185 22.864C42.7425 23.512 42.6545 24.232 42.6545 25.024C42.6545 25.824 42.7425 26.548 42.9185 27.196C43.1025 27.836 43.3705 28.384 43.7225 28.84C44.0825 29.296 44.5265 29.648 45.0545 29.896C45.5905 30.136 46.2145 30.256 46.9265 30.256ZM56.6013 19.06V26.692C56.6013 27.812 56.8573 28.692 57.3693 29.332C57.8813 29.964 58.6613 30.28 59.7093 30.28C60.4853 30.28 61.2093 30.084 61.8813 29.692C62.5533 29.292 63.1573 28.74 63.6933 28.036V19.06H64.8453V31H64.2093C64.0093 31 63.8933 30.896 63.8613 30.688L63.7533 28.912C63.2013 29.6 62.5613 30.152 61.8333 30.568C61.1133 30.984 60.3093 31.192 59.4213 31.192C58.7573 31.192 58.1773 31.088 57.6813 30.88C57.1853 30.672 56.7733 30.372 56.4453 29.98C56.1173 29.588 55.8693 29.116 55.7013 28.564C55.5333 28.012 55.4493 27.388 55.4493 26.692V19.06H56.6013ZM68.7766 31V19.06H69.3886C69.5246 19.06 69.6206 19.088 69.6766 19.144C69.7326 19.2 69.7686 19.296 69.7846 19.432L69.8686 21.94C70.0526 21.452 70.2606 21.02 70.4926 20.644C70.7326 20.26 71.0046 19.936 71.3086 19.672C71.6206 19.408 71.9646 19.208 72.3406 19.072C72.7246 18.928 73.1486 18.856 73.6126 18.856C73.8606 18.856 74.1046 18.88 74.3446 18.928C74.5846 18.968 74.7966 19.044 74.9806 19.156L74.8846 19.948C74.8446 20.076 74.7686 20.14 74.6566 20.14C74.5606 20.14 74.4126 20.112 74.2126 20.056C74.0206 20 73.7646 19.972 73.4446 19.972C72.9806 19.972 72.5686 20.044 72.2086 20.188C71.8486 20.332 71.5286 20.544 71.2486 20.824C70.9686 21.096 70.7206 21.44 70.5046 21.856C70.2966 22.264 70.1046 22.736 69.9286 23.272V31H68.7766ZM83.261 35.224V19.06H83.897C84.097 19.06 84.213 19.16 84.245 19.36L84.353 21.208C84.881 20.488 85.501 19.916 86.213 19.492C86.925 19.068 87.721 18.856 88.601 18.856C90.065 18.856 91.205 19.364 92.021 20.38C92.845 21.396 93.257 22.92 93.257 24.952C93.257 25.824 93.141 26.64 92.909 27.4C92.685 28.152 92.349 28.808 91.901 29.368C91.461 29.92 90.917 30.356 90.269 30.676C89.629 30.996 88.889 31.156 88.049 31.156C87.241 31.156 86.541 31.008 85.949 30.712C85.357 30.416 84.845 29.98 84.413 29.404V35.224H83.261ZM88.277 19.78C87.485 19.78 86.769 19.984 86.129 20.392C85.489 20.8 84.917 21.368 84.413 22.096V28.396C84.869 29.084 85.373 29.568 85.925 29.848C86.477 30.12 87.113 30.256 87.833 30.256C88.537 30.256 89.153 30.128 89.681 29.872C90.209 29.616 90.649 29.256 91.001 28.792C91.361 28.32 91.629 27.76 91.805 27.112C91.989 26.456 92.081 25.736 92.081 24.952C92.081 23.176 91.753 21.872 91.097 21.04C90.441 20.2 89.501 19.78 88.277 19.78ZM96.5032 31V13.54H97.6552V21.088C98.2072 20.408 98.8352 19.868 99.5392 19.468C100.251 19.068 101.047 18.868 101.927 18.868C102.583 18.868 103.159 18.972 103.655 19.18C104.159 19.388 104.575 19.688 104.903 20.08C105.231 20.472 105.479 20.944 105.647 21.496C105.815 22.048 105.899 22.672 105.899 23.368V31H104.747V23.368C104.747 22.248 104.491 21.372 103.979 20.74C103.467 20.1 102.687 19.78 101.639 19.78C100.855 19.78 100.127 19.98 99.4552 20.38C98.7832 20.772 98.1832 21.32 97.6552 22.024V31H96.5032ZM114.426 18.868C115.282 18.868 116.046 19.016 116.718 19.312C117.398 19.6 117.97 20.012 118.434 20.548C118.898 21.084 119.25 21.732 119.49 22.492C119.738 23.244 119.862 24.088 119.862 25.024C119.862 25.96 119.738 26.804 119.49 27.556C119.25 28.308 118.898 28.952 118.434 29.488C117.97 30.024 117.398 30.436 116.718 30.724C116.046 31.012 115.282 31.156 114.426 31.156C113.57 31.156 112.802 31.012 112.122 30.724C111.45 30.436 110.878 30.024 110.406 29.488C109.942 28.952 109.586 28.308 109.338 27.556C109.098 26.804 108.978 25.96 108.978 25.024C108.978 24.088 109.098 23.244 109.338 22.492C109.586 21.732 109.942 21.084 110.406 20.548C110.878 20.012 111.45 19.6 112.122 19.312C112.802 19.016 113.57 18.868 114.426 18.868ZM114.426 30.256C115.138 30.256 115.758 30.136 116.286 29.896C116.822 29.648 117.266 29.296 117.618 28.84C117.978 28.384 118.246 27.836 118.422 27.196C118.598 26.548 118.686 25.824 118.686 25.024C118.686 24.232 118.598 23.512 118.422 22.864C118.246 22.216 117.978 21.664 117.618 21.208C117.266 20.744 116.822 20.388 116.286 20.14C115.758 19.892 115.138 19.768 114.426 19.768C113.714 19.768 113.09 19.892 112.554 20.14C112.026 20.388 111.582 20.744 111.222 21.208C110.87 21.664 110.602 22.216 110.418 22.864C110.242 23.512 110.154 24.232 110.154 25.024C110.154 25.824 110.242 26.548 110.418 27.196C110.602 27.836 110.87 28.384 111.222 28.84C111.582 29.296 112.026 29.648 112.554 29.896C113.09 30.136 113.714 30.256 114.426 30.256ZM126.158 31.192C125.35 31.192 124.718 30.968 124.262 30.52C123.814 30.072 123.59 29.38 123.59 28.444V20.284H121.874C121.786 20.284 121.714 20.26 121.658 20.212C121.602 20.164 121.574 20.096 121.574 20.008V19.564L123.614 19.42L123.902 15.148C123.918 15.076 123.95 15.012 123.998 14.956C124.046 14.9 124.114 14.872 124.202 14.872H124.742V19.432H128.51V20.284H124.742V28.384C124.742 28.712 124.782 28.996 124.862 29.236C124.95 29.468 125.066 29.66 125.21 29.812C125.362 29.964 125.538 30.076 125.738 30.148C125.938 30.22 126.154 30.256 126.386 30.256C126.674 30.256 126.922 30.216 127.13 30.136C127.338 30.048 127.518 29.956 127.67 29.86C127.822 29.756 127.946 29.664 128.042 29.584C128.138 29.496 128.214 29.452 128.27 29.452C128.334 29.452 128.398 29.492 128.462 29.572L128.774 30.076C128.47 30.412 128.082 30.684 127.61 30.892C127.146 31.092 126.662 31.192 126.158 31.192ZM135.848 18.868C136.704 18.868 137.468 19.016 138.14 19.312C138.82 19.6 139.392 20.012 139.856 20.548C140.32 21.084 140.672 21.732 140.912 22.492C141.16 23.244 141.284 24.088 141.284 25.024C141.284 25.96 141.16 26.804 140.912 27.556C140.672 28.308 140.32 28.952 139.856 29.488C139.392 30.024 138.82 30.436 138.14 30.724C137.468 31.012 136.704 31.156 135.848 31.156C134.992 31.156 134.224 31.012 133.544 30.724C132.872 30.436 132.3 30.024 131.828 29.488C131.364 28.952 131.008 28.308 130.76 27.556C130.52 26.804 130.4 25.96 130.4 25.024C130.4 24.088 130.52 23.244 130.76 22.492C131.008 21.732 131.364 21.084 131.828 20.548C132.3 20.012 132.872 19.6 133.544 19.312C134.224 19.016 134.992 18.868 135.848 18.868ZM135.848 30.256C136.56 30.256 137.18 30.136 137.708 29.896C138.244 29.648 138.688 29.296 139.04 28.84C139.4 28.384 139.668 27.836 139.844 27.196C140.02 26.548 140.108 25.824 140.108 25.024C140.108 24.232 140.02 23.512 139.844 22.864C139.668 22.216 139.4 21.664 139.04 21.208C138.688 20.744 138.244 20.388 137.708 20.14C137.18 19.892 136.56 19.768 135.848 19.768C135.136 19.768 134.512 19.892 133.976 20.14C133.448 20.388 133.004 20.744 132.644 21.208C132.292 21.664 132.024 22.216 131.84 22.864C131.664 23.512 131.576 24.232 131.576 25.024C131.576 25.824 131.664 26.548 131.84 27.196C132.024 27.836 132.292 28.384 132.644 28.84C133.004 29.296 133.448 29.648 133.976 29.896C134.512 30.136 135.136 30.256 135.848 30.256ZM151.019 31V13.54H152.171V21.088C152.723 20.408 153.351 19.868 154.055 19.468C154.767 19.068 155.563 18.868 156.443 18.868C157.099 18.868 157.675 18.972 158.171 19.18C158.675 19.388 159.091 19.688 159.419 20.08C159.747 20.472 159.995 20.944 160.163 21.496C160.331 22.048 160.415 22.672 160.415 23.368V31H159.263V23.368C159.263 22.248 159.007 21.372 158.495 20.74C157.983 20.1 157.203 19.78 156.155 19.78C155.371 19.78 154.643 19.98 153.971 20.38C153.299 20.772 152.699 21.32 152.171 22.024V31H151.019ZM171.558 31C171.318 31 171.17 30.888 171.114 30.664L170.946 29.14C170.618 29.46 170.29 29.748 169.962 30.004C169.642 30.26 169.306 30.476 168.954 30.652C168.602 30.828 168.222 30.96 167.814 31.048C167.406 31.144 166.958 31.192 166.47 31.192C166.062 31.192 165.666 31.132 165.282 31.012C164.898 30.892 164.554 30.708 164.25 30.46C163.954 30.212 163.714 29.896 163.53 29.512C163.354 29.12 163.266 28.652 163.266 28.108C163.266 27.604 163.41 27.136 163.698 26.704C163.986 26.272 164.438 25.896 165.054 25.576C165.67 25.256 166.458 25 167.418 24.808C168.386 24.616 169.546 24.504 170.898 24.472V23.224C170.898 22.12 170.658 21.272 170.178 20.68C169.706 20.08 169.002 19.78 168.066 19.78C167.49 19.78 166.998 19.86 166.59 20.02C166.19 20.18 165.85 20.356 165.57 20.548C165.29 20.74 165.062 20.916 164.886 21.076C164.71 21.236 164.562 21.316 164.442 21.316C164.354 21.316 164.282 21.296 164.226 21.256C164.17 21.216 164.122 21.164 164.082 21.1L163.878 20.752C164.502 20.128 165.158 19.656 165.846 19.336C166.534 19.016 167.314 18.856 168.186 18.856C168.826 18.856 169.386 18.96 169.866 19.168C170.346 19.368 170.742 19.66 171.054 20.044C171.374 20.42 171.614 20.88 171.774 21.424C171.934 21.96 172.014 22.56 172.014 23.224V31H171.558ZM166.758 30.364C167.222 30.364 167.646 30.316 168.03 30.22C168.422 30.116 168.782 29.976 169.11 29.8C169.446 29.616 169.758 29.4 170.046 29.152C170.334 28.904 170.618 28.636 170.898 28.348V25.24C169.762 25.272 168.782 25.36 167.958 25.504C167.134 25.64 166.454 25.828 165.918 26.068C165.39 26.308 164.998 26.596 164.742 26.932C164.494 27.26 164.37 27.636 164.37 28.06C164.37 28.46 164.434 28.808 164.562 29.104C164.698 29.392 164.874 29.632 165.09 29.824C165.314 30.008 165.57 30.144 165.858 30.232C166.146 30.32 166.446 30.364 166.758 30.364ZM182.403 20.536C182.339 20.648 182.247 20.704 182.127 20.704C182.039 20.704 181.927 20.656 181.791 20.56C181.655 20.456 181.471 20.344 181.239 20.224C181.015 20.096 180.735 19.984 180.399 19.888C180.063 19.784 179.655 19.732 179.175 19.732C178.743 19.732 178.347 19.796 177.987 19.924C177.635 20.044 177.331 20.208 177.075 20.416C176.827 20.624 176.635 20.868 176.499 21.148C176.363 21.42 176.295 21.708 176.295 22.012C176.295 22.388 176.391 22.7 176.583 22.948C176.775 23.196 177.023 23.408 177.327 23.584C177.639 23.76 177.995 23.912 178.395 24.04C178.795 24.168 179.199 24.296 179.607 24.424C180.023 24.552 180.431 24.696 180.831 24.856C181.231 25.008 181.583 25.2 181.887 25.432C182.199 25.664 182.451 25.948 182.643 26.284C182.835 26.62 182.931 27.028 182.931 27.508C182.931 28.028 182.839 28.512 182.655 28.96C182.471 29.408 182.199 29.796 181.839 30.124C181.487 30.452 181.051 30.712 180.531 30.904C180.011 31.096 179.415 31.192 178.743 31.192C177.903 31.192 177.179 31.06 176.571 30.796C175.963 30.524 175.419 30.172 174.939 29.74L175.203 29.332C175.243 29.268 175.287 29.22 175.335 29.188C175.391 29.156 175.463 29.14 175.551 29.14C175.655 29.14 175.779 29.204 175.923 29.332C176.075 29.46 176.275 29.6 176.523 29.752C176.771 29.896 177.075 30.032 177.435 30.16C177.803 30.288 178.255 30.352 178.791 30.352C179.295 30.352 179.739 30.284 180.123 30.148C180.507 30.004 180.827 29.812 181.083 29.572C181.339 29.332 181.531 29.052 181.659 28.732C181.795 28.404 181.863 28.06 181.863 27.7C181.863 27.3 181.767 26.968 181.575 26.704C181.383 26.44 181.131 26.216 180.819 26.032C180.507 25.848 180.151 25.692 179.751 25.564C179.359 25.436 178.955 25.308 178.539 25.18C178.123 25.052 177.715 24.912 177.315 24.76C176.923 24.608 176.571 24.416 176.259 24.184C175.947 23.952 175.695 23.672 175.503 23.344C175.311 23.008 175.215 22.592 175.215 22.096C175.215 21.672 175.307 21.264 175.491 20.872C175.675 20.48 175.935 20.136 176.271 19.84C176.615 19.544 177.031 19.308 177.519 19.132C178.007 18.956 178.555 18.868 179.163 18.868C179.891 18.868 180.535 18.972 181.095 19.18C181.663 19.388 182.179 19.708 182.643 20.14L182.403 20.536ZM192.55 31V13.54H193.702V21.136C194.222 20.432 194.83 19.88 195.526 19.48C196.222 19.072 197.03 18.868 197.95 18.868C198.67 18.868 199.314 19 199.882 19.264C200.45 19.528 200.93 19.908 201.322 20.404C201.722 20.9 202.026 21.512 202.234 22.24C202.442 22.96 202.546 23.78 202.546 24.7C202.546 25.668 202.43 26.552 202.198 27.352C201.966 28.144 201.626 28.824 201.178 29.392C200.738 29.952 200.198 30.388 199.558 30.7C198.918 31.004 198.186 31.156 197.362 31.156C196.514 31.156 195.79 30.996 195.19 30.676C194.59 30.348 194.074 29.868 193.642 29.236L193.57 30.7C193.546 30.9 193.438 31 193.246 31H192.55ZM197.626 19.78C196.77 19.78 196.026 19.984 195.394 20.392C194.762 20.8 194.198 21.368 193.702 22.096V28.396C194.166 29.084 194.674 29.568 195.226 29.848C195.778 30.12 196.406 30.256 197.11 30.256C197.822 30.256 198.442 30.128 198.97 29.872C199.506 29.616 199.95 29.252 200.302 28.78C200.662 28.3 200.93 27.72 201.106 27.04C201.282 26.36 201.37 25.596 201.37 24.748C201.37 23.1 201.042 21.86 200.386 21.028C199.73 20.196 198.81 19.78 197.626 19.78ZM210.437 18.868C211.109 18.868 211.733 18.984 212.309 19.216C212.885 19.448 213.385 19.788 213.809 20.236C214.233 20.676 214.565 21.22 214.805 21.868C215.053 22.516 215.177 23.26 215.177 24.1C215.177 24.276 215.153 24.396 215.105 24.46C215.057 24.524 214.977 24.556 214.865 24.556H206.177V24.784C206.177 25.68 206.281 26.468 206.489 27.148C206.697 27.828 206.993 28.4 207.377 28.864C207.761 29.32 208.225 29.664 208.769 29.896C209.313 30.128 209.921 30.244 210.593 30.244C211.193 30.244 211.713 30.18 212.153 30.052C212.593 29.916 212.961 29.768 213.257 29.608C213.561 29.44 213.801 29.292 213.977 29.164C214.153 29.028 214.281 28.96 214.361 28.96C214.465 28.96 214.545 29 214.601 29.08L214.913 29.464C214.721 29.704 214.465 29.928 214.145 30.136C213.833 30.344 213.481 30.524 213.089 30.676C212.705 30.82 212.289 30.936 211.841 31.024C211.401 31.112 210.957 31.156 210.509 31.156C209.693 31.156 208.949 31.016 208.277 30.736C207.605 30.448 207.029 30.032 206.549 29.488C206.069 28.944 205.697 28.28 205.433 27.496C205.177 26.704 205.049 25.8 205.049 24.784C205.049 23.928 205.169 23.14 205.409 22.42C205.657 21.692 206.009 21.068 206.465 20.548C206.929 20.02 207.493 19.608 208.157 19.312C208.829 19.016 209.589 18.868 210.437 18.868ZM210.449 19.72C209.833 19.72 209.281 19.816 208.793 20.008C208.305 20.2 207.881 20.476 207.521 20.836C207.169 21.196 206.881 21.628 206.657 22.132C206.441 22.636 206.297 23.2 206.225 23.824H214.145C214.145 23.184 214.053 22.612 213.869 22.108C213.693 21.596 213.441 21.164 213.113 20.812C212.785 20.46 212.393 20.192 211.937 20.008C211.489 19.816 210.993 19.72 210.449 19.72ZM222.952 18.868C223.624 18.868 224.248 18.984 224.824 19.216C225.4 19.448 225.9 19.788 226.324 20.236C226.748 20.676 227.08 21.22 227.32 21.868C227.568 22.516 227.692 23.26 227.692 24.1C227.692 24.276 227.668 24.396 227.62 24.46C227.572 24.524 227.492 24.556 227.38 24.556H218.692V24.784C218.692 25.68 218.796 26.468 219.004 27.148C219.212 27.828 219.508 28.4 219.892 28.864C220.276 29.32 220.74 29.664 221.284 29.896C221.828 30.128 222.436 30.244 223.108 30.244C223.708 30.244 224.228 30.18 224.668 30.052C225.108 29.916 225.476 29.768 225.772 29.608C226.076 29.44 226.316 29.292 226.492 29.164C226.668 29.028 226.796 28.96 226.876 28.96C226.98 28.96 227.06 29 227.116 29.08L227.428 29.464C227.236 29.704 226.98 29.928 226.66 30.136C226.348 30.344 225.996 30.524 225.604 30.676C225.22 30.82 224.804 30.936 224.356 31.024C223.916 31.112 223.472 31.156 223.024 31.156C222.208 31.156 221.464 31.016 220.792 30.736C220.12 30.448 219.544 30.032 219.064 29.488C218.584 28.944 218.212 28.28 217.948 27.496C217.692 26.704 217.564 25.8 217.564 24.784C217.564 23.928 217.684 23.14 217.924 22.42C218.172 21.692 218.524 21.068 218.98 20.548C219.444 20.02 220.008 19.608 220.672 19.312C221.344 19.016 222.104 18.868 222.952 18.868ZM222.964 19.72C222.348 19.72 221.796 19.816 221.308 20.008C220.82 20.2 220.396 20.476 220.036 20.836C219.684 21.196 219.396 21.628 219.172 22.132C218.956 22.636 218.812 23.2 218.74 23.824H226.66C226.66 23.184 226.568 22.612 226.384 22.108C226.208 21.596 225.956 21.164 225.628 20.812C225.3 20.46 224.908 20.192 224.452 20.008C224.004 19.816 223.508 19.72 222.964 19.72ZM230.8 31V19.06H231.436C231.636 19.06 231.752 19.16 231.784 19.36L231.892 21.16C232.444 20.464 233.08 19.908 233.8 19.492C234.52 19.076 235.328 18.868 236.224 18.868C236.88 18.868 237.456 18.972 237.952 19.18C238.456 19.388 238.872 19.688 239.2 20.08C239.528 20.472 239.776 20.944 239.944 21.496C240.112 22.048 240.196 22.672 240.196 23.368V31H239.044V23.368C239.044 22.248 238.788 21.372 238.276 20.74C237.764 20.1 236.984 19.78 235.936 19.78C235.152 19.78 234.424 19.98 233.752 20.38C233.08 20.772 232.48 21.32 231.952 22.024V31H230.8ZM257.075 20.536C257.011 20.648 256.919 20.704 256.799 20.704C256.711 20.704 256.599 20.656 256.463 20.56C256.327 20.456 256.143 20.344 255.911 20.224C255.687 20.096 255.407 19.984 255.071 19.888C254.735 19.784 254.327 19.732 253.847 19.732C253.415 19.732 253.019 19.796 252.659 19.924C252.307 20.044 252.003 20.208 251.747 20.416C251.499 20.624 251.307 20.868 251.171 21.148C251.035 21.42 250.967 21.708 250.967 22.012C250.967 22.388 251.063 22.7 251.255 22.948C251.447 23.196 251.695 23.408 251.999 23.584C252.311 23.76 252.667 23.912 253.067 24.04C253.467 24.168 253.871 24.296 254.279 24.424C254.695 24.552 255.103 24.696 255.503 24.856C255.903 25.008 256.255 25.2 256.559 25.432C256.871 25.664 257.123 25.948 257.315 26.284C257.507 26.62 257.603 27.028 257.603 27.508C257.603 28.028 257.511 28.512 257.327 28.96C257.143 29.408 256.871 29.796 256.511 30.124C256.159 30.452 255.723 30.712 255.203 30.904C254.683 31.096 254.087 31.192 253.415 31.192C252.575 31.192 251.851 31.06 251.243 30.796C250.635 30.524 250.091 30.172 249.611 29.74L249.875 29.332C249.915 29.268 249.959 29.22 250.007 29.188C250.063 29.156 250.135 29.14 250.223 29.14C250.327 29.14 250.451 29.204 250.595 29.332C250.747 29.46 250.947 29.6 251.195 29.752C251.443 29.896 251.747 30.032 252.107 30.16C252.475 30.288 252.927 30.352 253.463 30.352C253.967 30.352 254.411 30.284 254.795 30.148C255.179 30.004 255.499 29.812 255.755 29.572C256.011 29.332 256.203 29.052 256.331 28.732C256.467 28.404 256.535 28.06 256.535 27.7C256.535 27.3 256.439 26.968 256.247 26.704C256.055 26.44 255.803 26.216 255.491 26.032C255.179 25.848 254.823 25.692 254.423 25.564C254.031 25.436 253.627 25.308 253.211 25.18C252.795 25.052 252.387 24.912 251.987 24.76C251.595 24.608 251.243 24.416 250.931 24.184C250.619 23.952 250.367 23.672 250.175 23.344C249.983 23.008 249.887 22.592 249.887 22.096C249.887 21.672 249.979 21.264 250.163 20.872C250.347 20.48 250.607 20.136 250.943 19.84C251.287 19.544 251.703 19.308 252.191 19.132C252.679 18.956 253.227 18.868 253.835 18.868C254.563 18.868 255.207 18.972 255.767 19.18C256.335 19.388 256.851 19.708 257.315 20.14L257.075 20.536ZM265.374 18.868C266.046 18.868 266.67 18.984 267.246 19.216C267.822 19.448 268.322 19.788 268.746 20.236C269.17 20.676 269.502 21.22 269.742 21.868C269.99 22.516 270.114 23.26 270.114 24.1C270.114 24.276 270.09 24.396 270.042 24.46C269.994 24.524 269.914 24.556 269.802 24.556H261.114V24.784C261.114 25.68 261.218 26.468 261.426 27.148C261.634 27.828 261.93 28.4 262.314 28.864C262.698 29.32 263.162 29.664 263.706 29.896C264.25 30.128 264.858 30.244 265.53 30.244C266.13 30.244 266.65 30.18 267.09 30.052C267.53 29.916 267.898 29.768 268.194 29.608C268.498 29.44 268.738 29.292 268.914 29.164C269.09 29.028 269.218 28.96 269.298 28.96C269.402 28.96 269.482 29 269.538 29.08L269.85 29.464C269.658 29.704 269.402 29.928 269.082 30.136C268.77 30.344 268.418 30.524 268.026 30.676C267.642 30.82 267.226 30.936 266.778 31.024C266.338 31.112 265.894 31.156 265.446 31.156C264.63 31.156 263.886 31.016 263.214 30.736C262.542 30.448 261.966 30.032 261.486 29.488C261.006 28.944 260.634 28.28 260.37 27.496C260.114 26.704 259.986 25.8 259.986 24.784C259.986 23.928 260.106 23.14 260.346 22.42C260.594 21.692 260.946 21.068 261.402 20.548C261.866 20.02 262.43 19.608 263.094 19.312C263.766 19.016 264.526 18.868 265.374 18.868ZM265.386 19.72C264.77 19.72 264.218 19.816 263.73 20.008C263.242 20.2 262.818 20.476 262.458 20.836C262.106 21.196 261.818 21.628 261.594 22.132C261.378 22.636 261.234 23.2 261.162 23.824H269.082C269.082 23.184 268.99 22.612 268.806 22.108C268.63 21.596 268.378 21.164 268.05 20.812C267.722 20.46 267.33 20.192 266.874 20.008C266.426 19.816 265.93 19.72 265.386 19.72ZM273.222 31V19.06H273.858C274.058 19.06 274.174 19.16 274.206 19.36L274.314 21.16C274.866 20.464 275.502 19.908 276.222 19.492C276.942 19.076 277.75 18.868 278.646 18.868C279.302 18.868 279.878 18.972 280.374 19.18C280.878 19.388 281.294 19.688 281.622 20.08C281.95 20.472 282.198 20.944 282.366 21.496C282.534 22.048 282.618 22.672 282.618 23.368V31H281.466V23.368C281.466 22.248 281.21 21.372 280.698 20.74C280.186 20.1 279.406 19.78 278.358 19.78C277.574 19.78 276.846 19.98 276.174 20.38C275.502 20.772 274.902 21.32 274.374 22.024V31H273.222ZM289.517 31.192C288.709 31.192 288.077 30.968 287.621 30.52C287.173 30.072 286.949 29.38 286.949 28.444V20.284H285.233C285.145 20.284 285.073 20.26 285.017 20.212C284.961 20.164 284.933 20.096 284.933 20.008V19.564L286.973 19.42L287.261 15.148C287.277 15.076 287.309 15.012 287.357 14.956C287.405 14.9 287.473 14.872 287.561 14.872H288.101V19.432H291.869V20.284H288.101V28.384C288.101 28.712 288.141 28.996 288.221 29.236C288.309 29.468 288.425 29.66 288.569 29.812C288.721 29.964 288.897 30.076 289.097 30.148C289.297 30.22 289.513 30.256 289.745 30.256C290.033 30.256 290.281 30.216 290.489 30.136C290.697 30.048 290.877 29.956 291.029 29.86C291.181 29.756 291.305 29.664 291.401 29.584C291.497 29.496 291.573 29.452 291.629 29.452C291.693 29.452 291.757 29.492 291.821 29.572L292.133 30.076C291.829 30.412 291.441 30.684 290.969 30.892C290.505 31.092 290.021 31.192 289.517 31.192Z" fill="#E6E6E6"/>
                        </svg>
                    </picture>
{#                    <img class="img-fluid" src="{{ 'assets/images/svg/preview-image.svg'|theme }}" alt="Картинка">#}
                </div>
            {% endif %}
            {% if message.person_id is empty %}
                <div class="username">MODERATOR</div>
            {% else %}
                <div class="username">{{ message.person.username }}</div>
            {% endif %}
        </div>
    </div>
    {% endif %}
{% endfor %}